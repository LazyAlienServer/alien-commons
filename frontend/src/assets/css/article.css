/*  Custom editor styles  */
@import 'tailwindcss';
@import 'katex/dist/katex.min.css';

@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

/* Custom Themes */
@theme {
    --font-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
}

/* Custom Utilities */
@utility bg-light {
    background-color: #FAFAFA;
}

@utility bg-dark {
    background-color: #1E1E1E;
}


@utility text-light {
    color: #1E1E1E;
}

@utility text-dark {
    color: #FAFAFA;
}

@utility no-select {
    -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;
}

/* Article Components */
@layer components {
    .article-card {
        @apply flex flex-col gap-2 p-4 w-full bg-white rounded-lg border-1 border-gray-200 shadow items-start
        hover:bg-gray-200
        dark:bg-dark dark:border-gray-200 dark:hover:bg-gray-600;
    }
    .article-sidebar-filter-query {
        @apply flex flex-row items-center border border-gray-300 rounded-sm py-1 px-1.5 whitespace-nowrap
        hover:bg-gray-200;
    }
    .editor-actions-btn {
        @apply flex flex-row items-center rounded-sm px-1 py-1 relative border border-gray-300
        hover:bg-gray-200;
    }
    .editor-actions-dropdown {
        @apply absolute
        flex flex-col right-0 top-full mt-1 w-32 p-2 z-10
        rounded-xl border border-gray-200 bg-white shadow
    }
    .editor-actions-dropdown-btn {
        @apply flex flex-row gap-x-2 px-3 py-2 items-center
        w-full h-auto rounded text-left
        no-select
        hover:bg-gray-100
    }
    .editor-toolbar-btn {
        @apply flex flex-row items-center
        border border-gray-200 rounded-sm p-1
        relative
        hover:bg-gray-200;
    }
    .editor-toolbar-btn.active {
        @apply bg-purple-200;
    }
    .editor-toolbar-svg.active {
        @apply stroke-purple-600;
    }
    .editor-toolbar-btn-tooltip {
        @apply absolute pointer-events-none left-1/2 top-full mt-1 -translate-x-1/2 whitespace-nowrap rounded-md
        bg-dark text-dark px-2 py-1 text-xs opacity-0 translate-y-1
        group-hover:opacity-100 group-hover:translate-y-0
        dark:text-light dark:bg-light;
    }
    .editor-toolbar-dropdown {
        @apply absolute
        flex flex-col left-0 top-full w-38 p-2 z-10
        rounded-xl border border-gray-200 bg-white shadow
    }
    .editor-toolbar-dropdown-btn {
        @apply flex flex-row gap-x-2 px-3 py-2 items-center
        w-full h-auto rounded text-left
        no-select
        hover:bg-gray-100
    }
    .editor-toolbar-dropdown-btn.active {
        @apply bg-gray-100
    }
    .ProseMirror {
        @apply outline-0
    }
    .ProseMirror blockquote {
        @apply border-l-4 border-gray-200 pl-4 my-4 text-gray-600;
    }
    .ProseMirror h1 {
        @apply text-4xl font-bold
    }
    .ProseMirror h2 {
        @apply text-3xl font-bold
    }
    .ProseMirror h3 {
        @apply text-2xl font-bold
    }
    .ProseMirror pre {
        @apply relative my-4 rounded-lg bg-gray-900 px-4 py-3 overflow-x-auto;
    }
    .ProseMirror pre code {
        @apply block leading-relaxed whitespace-pre font-mono bg-transparent text-gray-100 text-[14px];
    }
    .ProseMirror code {
        @apply rounded bg-gray-100 px-1 py-0.5 font-mono text-[15px] text-gray-800;
    }
    .ProseMirror a {
        @apply text-blue-500 underline text-[18px] hover:text-blue-500;
    }
    /* List styles */
    .ProseMirror ul {
        @apply list-disc pl-5;
    }
    .ProseMirror ol {
        @apply list-decimal pl-5;
    }
    .ProseMirror ul li p,
    .ProseMirror ol li p {
        @apply my-1;
    }
    /* Task list specific styles */
    .ProseMirror ul[data-type='taskList'] {
        @apply list-none;
    }
    .ProseMirror ul[data-type='taskList'] > li {
        @apply flex flex-row items-center justify-start;
    }
    .ProseMirror ul[data-type='taskList'] > li > label {
        @apply mr-2 select-none;
    }
    .ProseMirror ul[data-type='taskList'] > li > div {
        @apply flex-1;
    }
    .ProseMirror ul[data-type='taskList'] > li[data-checked='true'] > div {
        @apply line-through text-gray-400;
    }
    .ProseMirror ul[data-type='taskList'] input[type='checkbox'] {
        @apply cursor-pointer w-[14px] h-[14px];
    }
    .ProseMirror ul[data-type='taskList'] ul[data-type='taskList'] {
        @apply m-0;
    }
    /* Mathematics extension styles */
    .tiptap-mathematics-render {
        @apply px-1 rounded bg-gray-100;
    }
    /* Editable math hover behavior */
    .tiptap-mathematics-render--editable {
        @apply cursor-pointer transition-colors duration-200;
    }
    .tiptap-mathematics-render--editable:hover {
        @apply bg-gray-200;
    }
    /* Inline math */
    .tiptap-mathematics-render[data-type='inline-math'] {
        @apply inline-block;
    }
    /* Block math */
    .tiptap-mathematics-render[data-type='block-math'] {
        @apply block my-4 p-4 text-center;
    }
    /* Math render error states */
    .tiptap-mathematics-render.inline-math-error,
    .tiptap-mathematics-render.block-math-error {
        @apply bg-red-100 text-red-600 border border-red-400 p-2 rounded;
    }
    .ProseMirror p.is-editor-empty:first-child::before {
        content: attr(data-placeholder);
        @apply text-gray-400;
        float: left;
        pointer-events: none;
        height: 0;
    }
    /* Youtube embed */
    div[data-youtube-video] iframe {
        @apply block min-h-[200px] min-w-[200px] outline-transparent rounded-md
        border-6 border-gray-900;
    }
}
